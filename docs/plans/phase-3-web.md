# Phase 3: Web 前端重构

## 目标

基于 React + TypeScript + Tailwind CSS 构建现代化的 Web 前端应用，实现完整的用户界面和交互体验。

## 前置条件

- ✅ Phase 2 完成：后端 API 服务可用
- ✅ 设计系统和 Design Tokens 已定义
- ✅ API 接口文档完整

## 任务列表

### 3.1 项目搭建与配置 (0.5天)

**目标**: 初始化 Web 前端项目并配置开发环境

**任务**:
- 使用 Vite 创建 React + TypeScript 项目
- 配置 Tailwind CSS（引入 design-tokens.json）
- 配置路由 (React Router v6)
- 配置状态管理 (Zustand)
- 配置 API 请求库 (Axios + React Query)
- 配置环境变量
- 配置 ESLint + Prettier
- 配置 Vitest 测试环境
- 创建基础目录结构

**目录结构**:
```
apps/web/
├── src/
│   ├── components/     # 通用组件
│   ├── features/       # 功能模块
│   ├── pages/          # 页面组件
│   ├── hooks/          # 自定义 Hooks
│   ├── stores/         # 状态管理
│   ├── services/       # API 服务
│   ├── utils/          # 工具函数
│   ├── styles/         # 全局样式
│   └── types/          # 类型定义
```

**验证标准**:
- [ ] 项目成功启动，热更新正常
- [ ] Tailwind CSS 样式生效
- [ ] 路由配置正确，页面跳转正常
- [ ] API 请求拦截器配置完成
- [ ] 代码格式化和 Lint 检查通过

---

### 3.2 UI 组件库搭建 (1天)

**目标**: 基于设计系统创建可复用的 UI 组件库

**任务**:
- 创建基础组件:
  - Button (主要、次要、文本按钮)
  - Input (文本、数字、搜索)
  - Card (基础卡片、聚会卡片)
  - Avatar (用户头像)
  - Badge (状态徽章)
  - Modal (对话框)
  - Toast (消息提示)
  - Loading (加载状态)
  - Empty (空状态)
- 创建布局组件:
  - Layout (页面布局)
  - Header (顶部导航)
  - Sidebar (侧边栏，可选)
  - Container (内容容器)
- 实现深色模式切换
- 编写组件 Storybook 文档（可选）
- 编写组件单元测试

**验证标准**:
- [ ] 所有组件符合设计规范
- [ ] 组件支持主题切换（浅色/深色）
- [ ] 组件可访问性 (a11y) 良好
- [ ] 组件响应式适配
- [ ] 组件单元测试覆盖率 > 70%

---

### 3.3 登录页面 (0.5天)

**目标**: 实现手机号验证码登录

**任务**:
- 创建登录页面 UI
- 实现手机号输入和验证
- 实现验证码发送和倒计时
- 实现登录逻辑
- 实现 token 存储和自动登录
- 实现登录状态管理
- 添加登录错误处理

**页面路由**: `/login`

**验证标准**:
- [ ] 手机号格式验证正确
- [ ] 验证码发送成功，倒计时显示
- [ ] 登录成功后跳转到首页
- [ ] Token 正确存储到 localStorage
- [ ] 刷新页面保持登录状态
- [ ] 错误提示友好清晰

---

### 3.4 首页 (1天)

**目标**: 实现首页布局和快速创建聚会入口

**任务**:
- 创建首页布局
- 实现顶部导航栏（Logo、用户信息、主题切换）
- 实现快速创建聚会按钮
- 实现聚会列表展示（进行中、已完成）
- 实现聚会卡片组件
- 实现空状态提示
- 实现下拉刷新（可选）
- 实现无限滚动加载（可选）

**页面路由**: `/`

**验证标准**:
- [ ] 首页布局美观，符合设计规范
- [ ] 导航栏功能正常
- [ ] 聚会列表正确展示
- [ ] 点击聚会卡片跳转到详情页
- [ ] 空状态提示友好
- [ ] 响应式适配良好

---

### 3.5 聚会仪表盘 (1.5天)

**目标**: 实现聚会详情和实时状态展示

**任务**:
- 创建聚会仪表盘页面
- 实现聚会信息展示（标题、描述、参与者）
- 实现参与者列表和状态
- 实现地点推荐功能
- 实现地点列表展示
- 实现地点投票功能
- 实现投票统计可视化
- 实现催促功能
- 实现实时轮询更新
- 实现地图展示（高德地图）
- 实现聚会状态流转

**页面路由**: `/gatherings/:id`

**验证标准**:
- [ ] 聚会信息完整展示
- [ ] 参与者状态实时更新
- [ ] 地点推荐功能正常
- [ ] 投票功能正常，统计准确
- [ ] 地图正确显示地点位置
- [ ] 催促功能正常发送通知
- [ ] 轮询更新不影响用户操作
- [ ] 状态流转逻辑正确

---

### 3.6 我的聚会页面 (1天)

**目标**: 实现个人聚会管理和历史记录

**任务**:
- 创建我的聚会页面
- 实现聚会分类（我创建的、我参与的）
- 实现聚会筛选（进行中、已完成、已取消）
- 实现聚会搜索
- 实现聚会编辑功能
- 实现聚会删除功能
- 实现个人信息编辑
- 实现通知中心

**页面路由**: `/my-gatherings`

**验证标准**:
- [ ] 聚会分类和筛选正常
- [ ] 搜索功能准确
- [ ] 编辑功能正常保存
- [ ] 删除功能有二次确认
- [ ] 个人信息更新成功
- [ ] 通知列表正确展示

---

### 3.7 响应式适配与优化 (0.5天)

**目标**: 优化移动端体验和性能

**任务**:
- 适配移动端布局（320px - 768px）
- 优化触摸交互
- 实现移动端导航（底部 Tab 或汉堡菜单）
- 优化图片加载（懒加载、压缩）
- 优化首屏加载速度
- 实现骨架屏加载
- 实现 PWA 支持（可选）
- 性能优化（代码分割、Tree Shaking）

**验证标准**:
- [ ] 移动端布局正常，无横向滚动
- [ ] 触摸交互流畅
- [ ] 首屏加载时间 < 2s
- [ ] Lighthouse 性能评分 > 90
- [ ] 无明显性能瓶颈
- [ ] PWA 可安装（可选）

---

## 总验证标准

- [ ] 所有页面符合设计规范
- [ ] 所有功能正常运行
- [ ] 响应式适配完整（桌面端 + 移动端）
- [ ] 深色模式正常切换
- [ ] 错误处理完善
- [ ] 加载状态友好
- [ ] 单元测试覆盖率 > 60%
- [ ] E2E 测试覆盖核心流程
- [ ] 无控制台错误和警告
- [ ] 代码质量良好，无明显技术债

## 预估时间

**总计**: 5-6 天

- 3.1 项目搭建: 0.5天
- 3.2 UI 组件库: 1天
- 3.3 登录页: 0.5天
- 3.4 首页: 1天
- 3.5 仪表盘: 1.5天
- 3.6 我的聚会: 1天
- 3.7 响应式优化: 0.5天

## 技术栈

- **框架**: React 18
- **语言**: TypeScript
- **构建工具**: Vite
- **样式**: Tailwind CSS
- **路由**: React Router v6
- **状态管理**: Zustand
- **数据请求**: Axios + React Query
- **地图**: 高德地图 Web API
- **测试**: Vitest + Testing Library
- **代码质量**: ESLint + Prettier

## 注意事项

1. 所有组件必须支持深色模式
2. 移动端优先设计，桌面端增强
3. 图片和资源使用 CDN 加速
4. 敏感信息不存储在前端
5. API 请求需要错误重试和超时处理
6. 用户操作需要乐观更新提升体验
7. 关键操作需要二次确认
