# ç¢°ä¸ªå¤´ (OnTheWay)

> ğŸœ å¤šäººèšä¼šåè°ƒå¹³å° â€” å¸®åŠ©æœ‹å‹ä»¬å¿«é€Ÿæ‰¾åˆ°æœ€ä½³èšé¤åœ°ç‚¹

<p align="center">
  <img src="assets/logo.png" alt="ç¢°ä¸ªå¤´ Logo" width="120" />
</p>

---

## é¡¹ç›®ä»‹ç»

**ç¢°ä¸ªå¤´** è§£å†³çš„æ˜¯ä¸€ä¸ªé«˜é¢‘ç—›ç‚¹ï¼šå¤šäººèšé¤æ—¶ï¼Œ"å»å“ªåƒ"çš„å†³ç­–å¾€å¾€æ¯”åƒé¥­æœ¬èº«è¿˜ç´¯ã€‚

æ¯ä¸ªäººä½ç½®ä¸åŒã€å£å‘³ä¸åŒã€æ—¶é—´ä¸åŒï¼Œç¾¤é‡Œè®¨è®ºåŠå¤©ä¹Ÿå®šä¸ä¸‹æ¥ã€‚ç¢°ä¸ªå¤´è®©è¿™ä¸ªè¿‡ç¨‹å˜å¾—ç®€å•ï¼š

1. å‘èµ·äººåˆ›å»ºèšä¼šï¼Œåˆ†äº«é‚€è¯·ç 
2. æœ‹å‹ä»¬åŠ å…¥ï¼Œå¡«å†™è‡ªå·±çš„ä½ç½®å’Œå£å‘³åå¥½
3. AI ç»¼åˆæ‰€æœ‰äººçš„ä¿¡æ¯ï¼Œæ¨èæœ€ä½³é¤å…
4. å¤§å®¶æŠ•ç¥¨ç¡®è®¤
5. ç³»ç»Ÿè®¡ç®—æ¯ä¸ªäººçš„å‡ºå‘æ—¶é—´ï¼Œå®æ—¶è¿½è¸ªï¼Œæ™ºèƒ½å‚¬ä¿ƒ
6. å…¨å‘˜åˆ°è¾¾ï¼Œå¼€åƒï¼

---

## åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ‰ **åˆ›å»ºèšä¼š** | è®¾å®šèšé¤æ—¶é—´ã€åœ°ç‚¹åå¥½ï¼Œä¸€é”®ç”Ÿæˆé‚€è¯·ç  |
| ğŸ”— **é‚€è¯·ç åˆ†äº«** | 6 ä½çŸ­ç ï¼Œå¤åˆ¶/åˆ†äº«å³å¯åŠ å…¥ |
| ğŸ¤– **AI æ¨èé¤å…** | ç»¼åˆæ‰€æœ‰äººä½ç½®ã€å£å‘³åå¥½ï¼Œæ™ºèƒ½æ¨èæœ€ä¼˜é¤å… |
| ğŸ—³ï¸ **å®æ—¶æŠ•ç¥¨** | å¯¹æ¨èé¤å…æŠ•ç¥¨ï¼Œå¤šæ•°é€šè¿‡å³ç¡®è®¤ |
| ğŸš— **å‡ºå‘è¿½è¸ª** | æ ¹æ®è·ç¦»è®¡ç®—å‡ºå‘æ—¶é—´ï¼Œå®æ—¶æ˜¾ç¤ºæ¯ä¸ªäººçš„çŠ¶æ€ |
| â° **æ™ºèƒ½å‚¬ä¿ƒ** | è¯¥å‡ºå‘äº†è‡ªåŠ¨æé†’ï¼Œè¿Ÿåˆ°äº†å‹å¥½å‚¬ä¿ƒ |
| ğŸŒ™ **æš—è‰²æ¨¡å¼** | æ¸©æš–çš„æš—è‰²ä¸»é¢˜ï¼ŒæŠ¤çœ¼èˆ’é€‚ |
| ğŸ“± **å¤šç«¯æ”¯æŒ** | Web + å¾®ä¿¡å°ç¨‹åºï¼Œè¦†ç›–ä¸»æµåœºæ™¯ |

---

## æŠ€æœ¯æ ˆ

```
Monorepo (pnpm workspace)
â”œâ”€â”€ TypeScript å…¨æ ˆ
â”œâ”€â”€ Web:  React 18 + Vite 6 + Tailwind CSS 3 + Zustand 5
â”œâ”€â”€ API:  Express 4 + Zod + Supabase JS
â”œâ”€â”€ å°ç¨‹åº: åŸç”Ÿå¾®ä¿¡ + TypeScript
â”œâ”€â”€ æ•°æ®:  Supabase (PostgreSQL + Auth + Realtime)
â”œâ”€â”€ æµ‹è¯•:  Vitest
â””â”€â”€ éƒ¨ç½²:  Vercel + Supabase Cloud
```

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- pnpm >= 8.0.0

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone <repo-url>
cd ontheway

# å®‰è£…ä¾èµ–
pnpm install
```

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å†™ä»¥ä¸‹é…ç½®ï¼š

```bash
# Supabaseï¼ˆå¿…éœ€ï¼‰
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# é«˜å¾·åœ°å›¾ï¼ˆæ¨èåŠŸèƒ½éœ€è¦ï¼‰
AMAP_KEY=your_amap_web_service_key
AMAP_JS_KEY=your_amap_js_api_key
AMAP_JS_SECRET=your_amap_js_api_secret

# å¾®ä¿¡å°ç¨‹åºï¼ˆPhase 4ï¼‰
WX_APPID=your_wx_appid
WX_SECRET=your_wx_secret
```

### å¯åŠ¨å¼€å‘

```bash
# æ„å»ºå…±äº«åŒ…ï¼ˆé¦–æ¬¡å¿…é¡»ï¼‰
pnpm build:shared

# å¯åŠ¨åç«¯ APIï¼ˆlocalhost:3000ï¼‰
pnpm dev:server

# å¯åŠ¨ Web å‰ç«¯ï¼ˆlocalhost:5173ï¼‰
pnpm dev:web
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# ä»…æµ‹è¯•å…±äº«åŒ…
pnpm test:shared

# ä»…æµ‹è¯•åç«¯
pnpm test:server
```

---

## é¡¹ç›®ç»“æ„

```
ontheway/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/              # @ontheway/shared â€” å…±äº«ä»£ç 
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ types/       # ç±»å‹å®šä¹‰ï¼ˆGathering, Participant, etc.ï¼‰
â”‚   â”‚       â”œâ”€â”€ constants/   # å¸¸é‡ï¼ˆçŠ¶æ€æšä¸¾ã€é…ç½®å€¼ï¼‰
â”‚   â”‚       â””â”€â”€ utils/       # å·¥å…·å‡½æ•°ï¼ˆé‚€è¯·ç ç”Ÿæˆã€è·ç¦»è®¡ç®—ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ server/              # @ontheway/server â€” Express API
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ routes/      # è·¯ç”±å®šä¹‰
â”‚   â”‚       â”œâ”€â”€ services/    # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚       â”œâ”€â”€ middleware/  # ä¸­é—´ä»¶ï¼ˆè®¤è¯ã€é”™è¯¯å¤„ç†ï¼‰
â”‚   â”‚       â””â”€â”€ lib/         # å¤–éƒ¨æœåŠ¡å°è£…ï¼ˆSupabaseã€é«˜å¾·ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ web/                 # @ontheway/web â€” React SPA
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ components/  # UI ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ pages/       # é¡µé¢
â”‚   â”‚       â”œâ”€â”€ stores/      # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ hooks/       # è‡ªå®šä¹‰ Hooks
â”‚   â”‚       â””â”€â”€ lib/         # å·¥å…·åº“
â”‚   â”‚
â”‚   â””â”€â”€ miniprogram/         # å¾®ä¿¡å°ç¨‹åº
â”‚       â”œâ”€â”€ pages/           # å°ç¨‹åºé¡µé¢
â”‚       â”œâ”€â”€ components/      # å°ç¨‹åºç»„ä»¶
â”‚       â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ PRD.md               # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture.md      # æŠ€æœ¯æ¶æ„
â”‚   â”œâ”€â”€ api-spec.md          # API æ¥å£è§„èŒƒ
â”‚   â”œâ”€â”€ data-model.md        # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ design-system.md     # è®¾è®¡ç³»ç»Ÿ
â”‚   â””â”€â”€ plans/               # å¼€å‘è®¡åˆ’
â”‚
â”œâ”€â”€ supabase/                # Supabase é…ç½®
â”‚   â”œâ”€â”€ config.toml          # æœ¬åœ°å¼€å‘é…ç½®
â”‚   â””â”€â”€ seed.sql             # ç§å­æ•°æ®
â”‚
â”œâ”€â”€ design/                  # è®¾è®¡èµ„æº
â”‚   â””â”€â”€ design-tokens.json   # è®¾è®¡ Token
â”‚
â”œâ”€â”€ scripts/                 # è„šæœ¬å·¥å…·
â”œâ”€â”€ assets/                  # é™æ€èµ„æº
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ package.json             # æ ¹ package.json
â”œâ”€â”€ pnpm-workspace.yaml      # pnpm workspace é…ç½®
â”œâ”€â”€ tsconfig.base.json       # TypeScript åŸºç¡€é…ç½®
â””â”€â”€ CLAUDE.md                # Claude åä½œè§„èŒƒ
```

---

## å¼€å‘æŒ‡å—

### åˆ†æ”¯ç­–ç•¥

- `main` â€” ç¨³å®šç‰ˆæœ¬ï¼Œå¯éƒ¨ç½²
- `dev` â€” å¼€å‘åˆ†æ”¯ï¼ŒPhase å®Œæˆååˆå…¥ main
- `feature/*` â€” åŠŸèƒ½åˆ†æ”¯ï¼Œä» dev åˆ›å»º

### å¼€å‘æµç¨‹

1. é˜…è¯»å¯¹åº” Phase çš„è®¡åˆ’æ–‡æ¡£ï¼ˆ`docs/plans/`ï¼‰
2. æŒ‰ Task é¡ºåºå¼€å‘ï¼Œæ¯ä¸ª Task å…ˆå†™æµ‹è¯•
3. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡åæäº¤
4. Phase å®Œæˆåè¿›è¡Œæ•´ä½“éªŒè¯

### å…±äº«åŒ…å¼€å‘

ä¿®æ”¹ `packages/shared` åéœ€è¦é‡æ–°æ„å»ºï¼š

```bash
pnpm build:shared
```

æˆ–ä½¿ç”¨ watch æ¨¡å¼ï¼š

```bash
cd packages/shared && pnpm dev
```

---

## éƒ¨ç½²è¯´æ˜

### Web + APIï¼ˆVercelï¼‰

```bash
# æ„å»º
pnpm build

# Vercel ä¼šè‡ªåŠ¨æ£€æµ‹ monorepo ç»“æ„
# Web: packages/web/dist â†’ é™æ€æ‰˜ç®¡
# API: packages/server â†’ Serverless Functions
```

### æ•°æ®åº“ï¼ˆSupabase Cloudï¼‰

1. åœ¨ [Supabase](https://supabase.com) åˆ›å»ºé¡¹ç›®
2. æ‰§è¡Œ `supabase/` ç›®å½•ä¸‹çš„è¿ç§»æ–‡ä»¶
3. é…ç½® RLS ç­–ç•¥
4. å°†è¿æ¥ä¿¡æ¯å¡«å…¥ç¯å¢ƒå˜é‡

---

## æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [CLAUDE.md](CLAUDE.md) | Claude åä½œè§„èŒƒ |
| [docs/PRD.md](docs/PRD.md) | äº§å“éœ€æ±‚æ–‡æ¡£ |
| [docs/architecture.md](docs/architecture.md) | æŠ€æœ¯æ¶æ„è®¾è®¡ |
| [docs/api-spec.md](docs/api-spec.md) | API æ¥å£è§„èŒƒ |
| [docs/data-model.md](docs/data-model.md) | æ•°æ®æ¨¡å‹è®¾è®¡ |
| [docs/design-system.md](docs/design-system.md) | è®¾è®¡ç³»ç»Ÿè§„èŒƒ |
| [docs/plans/overview.md](docs/plans/overview.md) | å¼€å‘è®¡åˆ’æ€»è§ˆ |

---

## è®¸å¯è¯

ç§æœ‰é¡¹ç›®ï¼Œä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
